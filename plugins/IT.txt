Avisynth用プラグイン

IT 0.051


逆テレシネ・プラグインです。


処理手順

A マッチするフィールドの選択
B 縞が残る場合（変則テレシネ、ドロップフレームなどで起こります）は解除
C fps = 24の場合、5コマ中1コマ削除


履歴
  0.051       ソースの添付	
  0.05 change パラメータを変更 @ 処理C
  0.05 debug  480line以上のソースに対応(w @ 処理ABC
　0.04 new    24fps化
　　　 change 微妙な縞判定精度の微妙な向上 @ 処理A
       change 作り直す ﾄｯﾃﾝｶﾝ　@ 処理B
       change ref = "AUTO"の廃止、デフォルトは "TOP" に変わりました。
　0.03 debug  非プログレッシブ・フレームの解除処理でのバグ修正 @ 処理B
　0.02 change 非プログレッシブ・フレームでエッジを保存を強化 @ 処理B
  0.01 なんとなく作る


使用条件
　MMX2が使えるCPUが必要です。
　横のサイズが16の倍数,縦のサイズが８の倍数



説明
　avsファイルで以下のように設定します。
　　LoadPlugin("〜\IT.dll")
	ソースの読み込みなど
　　IT(ref = "TOP")

    ※ref = "???" でフィールド・オーダーを正しく指定してください。


書式
　　IT(fps = 24, ref = "TOP", blend = false)
　　　デフォルト fps = 24, ref = "TOP", blend = false

    fps
          24       24fps化します。
　　　　　30       プログレッシブ化するのみです。

　　blend
　　　　　true     モーションがある程度均等に大きい30p,30iのフレームを、
　　　　　　　　　 間引く変わりに5→4フレームへリサンプリングします。

　　　　　　　　　 主に24p、時々30p/iの組み合わせのソースの30fps部分のかくつきを
                   軽減します。たぶん。

                   ※fps = 24の時のみ有効です。
                   ※残像が出ます。
                   ※同一フレームにおいて、全体の動きが24pで一部分が30pの周期で動く場合
　　　　　　　　　 補完されることによって逆にカクカクしてしまう事があるかもしれません。
　　ref 　
          "TOP"    トップ・ファーストです。
　　　　　"BOTTOM" ボトム・ファーストです。


使用例
	IT(fps = 24, ref = "TOP", blend = true)


注意点

※無効領域が激しく大きい場合は、ITの前にCropしたほうが精度が上がると
思います。

※画面の端に大きなノイズが出ている場合は、ITの前にノイズ部分をCrop
もしくはべた塗りしたほうが精度が上がると思います。

※fps = 24 の場合ランダムアクセスすると出力結果が微妙に変わります。
  （普通にエンコードする時は問題ありません。）

※フィールド・オーダーを間違って設定するとボロボロになります。

※主に(top, bottom) = (1t,1b) (2t,2b) (2t,3b) (3t,4b) (4t,4b)というテレシネを対象とし
ています。

※それなりにソースがきれいなことを前提に作ってます。
　時間軸ノイズ、ドット妨害、クロスカラーは誤判定の原因になります。





ソースについて
　tab = 2にすると見やすいかも。

　だめプログラマなのでコメントとかほとんど書きません。ちゃんと追加しよう
と思ったのですが、疲れたました。スマソ
　
