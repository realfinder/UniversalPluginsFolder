<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Reform Function </title>
</head>

<body>
	   <font color="#cc0033"><h1>Reform </h1></font>
	 
	  <BR><b><a href="vcmohan.html">Author V. C. Mohan</a></b>
	  <BR> Nov 2016
	  
	   <BR>Reform uses matrix algebra for transformations
	   . <p><B>This function accepts RGB, Planar and YUY2 formats for all bit depths supported by avisynth+. It is thread safe. MT_NICE_FILTER</B> </p>
	   
<P> Reform has two modes  viz: rectangle to quadrilateral and quadrilateral to rectangle.  Lanczos or cubic or linear or nearest point interpolation methods
  can be opted.   Coordinates can be specified in floating point
    real or in normalized form.
 </p>
 <p> While there are no limits for specifying parameters, it has to be ensured that 
 the specified parameters do not twist or fold the Quadrlateral. In the table of
  parameters R stands for Rectangle and Q stands for Quadrilateral.</P>
 <BR>For specifying coordinates 
 correctly my plugin 
Grid can be used.

<p>
<table border="2" bordercolor="#c0c0c0">

<caption align="center">Description of parameters. Q stands for Quadrilateral
 and R for rectangle.</caption>
<tr>
       <td><strong><font color="#cc0066">Parameter</font></strong></td>
       <td><strong><font color="#cc0066">Parameter name</font></strong></td>
	   <td><strong><font color="#cc0066">Variable type</font></strong></td>
       <td><strong><font color="#cc0066">Limits of values</font></strong></td>
       <td><strong><font color="#cc0066">Default value</font></strong></td>
</tr>



<tr>
       <td>clip to be skewed into quadrilateral or deskewed into rectangle</td>
       <td></td>
	   <td>clip</td>
       <td></td>
       <td>none</td>
</tr>

<tr>
       <td>clip to be used as background</td>
       <td></td>
	   <td>clip</td>
       <td></td>
       <td>none</td>
</tr>
<tr>
       <td>resize interpolation to use</td>
       <td>resize</td>
	   <td>string</td>
       <td>"lanczos" "cubic" "line" "point"</td>
       <td>"cubic"</td>
</tr>

<tr>
       <td>Q left top x coordinate</td>
       <td>ltopx</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>

<tr>
       <td>Q left top y coordinate</td>
       <td>ltopy</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>

<tr>
       <td>Q left bottom x coordinate</td>
       <td>lbotx</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>
<tr>
       <td>Q left bottom y coordinate</td>
       <td>lboty</td>
	   <td>float</td>
       <td>none</td>
       <td>frame height-1</td>
</tr>

<tr>
       <td>Q right top x coordinate</td>
       <td>rtopx</td>
	   <td>float</td>
       <td>none</td>
       <td>frame width-1</td>
</tr>

<tr>
       <td>Q right top y coordinate</td>
       <td>rtopy</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>

<tr>
       <td>Q right bottom x coordinate</td>
       <td>rbotx</td>
	   <td>float</td>
       <td>none</td>
       <td>frame width-1</td>
</tr>
<tr>
       <td>Q right bottom y coordinate</td>
       <td>rboty</td>
	   <td>float</td>
       <td>none</td>
       <td>frame height-1</td>
</tr>

<tr>
       <td>R left  x coordinate</td>
       <td>leftx</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>

<tr>
       <td>R right x coordinate</td>
       <td>rightx</td>
	   <td>float</td>
       <td>none</td>
       <td>frame width-1</td>
</tr>

<tr>
       <td>R top y coordinate</td>
       <td>ytop</td>
	   <td>float</td>
       <td>none</td>
       <td>0</td>
</tr>
<tr>
       <td>R bottom y coordinate</td>
       <td>ybot</td>
	   <td>float</td>
       <td>none</td>
       <td>frame height-1</td>
</tr>
<tr>
       <td>Whether quadrilateral to rectangle conversion</td>
       <td>qr</td>
	   <td>boolean</td>
       <td>true for q to r, false for r to q</td>
       <td>true</td>
</tr>
<tr>
       <td>Whether normalised coordinates are specified?</td>
       <td>norm</td>
	   <td>boolean</td>
       <td>true for normalized, false for real</td>
       <td>false</td>
</tr>

</table>

<br>
<pre>Script examples:-
ColorBars(). converttorgb32()
bg = blankclip(last)
Reform(bg, resize= "lanczos",leftx = 100,rightx = 400, ytop = 200, ybot = 480,ltopx=200,ltopy=150, rbotx = 500, rboty = 400)
</pre>
Below is a suitably modified interesting script due to Martin53 ( sept 2012)in the quad
 plugin thread). By  commenting either call or  or none the power of
 the plugin can be viewed.
 <Pre>
 ColorBars(). converttoYV12()
bg = blankclip(last)
Subtitle("Flying Colorbars()",text_color=$d0c000,align=5,size=40)
 ScriptClip("""
c= last

	bg = blankclip(last)
	h = height(bg)-1
	w = width(bg)-1	
    t = 0.061 *(current_frame)
    t2 = 0.127 *( current_frame)
    a = 0.501 + 0.5 * sin(t/pi)
    t1x = (-0.2*cos(t2)) * w
    t1y = (0.5-0.5*cos(t2)) * h
    t2x = (1.0+0.2*cos(t2)) * w
    t2y = (0.5-0.5*cos(t2)) * h
    t3x = (1.0+0.2*cos(t2)) * w
    t3y = (0.5+0.5*cos(t2)) * h
    t4x = (-0.2*cos(t2)) * w
    t4y = (0.5+0.5*cos(t2)) * h
    c1x = (0.5+a*cos(t)) * w
    c1y = (0.5+a*sin(t)) * h
    c2x = (0.5-a*sin(t)) * w
    c2y = (0.5+a*cos(t)) * h
    c3x = (0.5-a*cos(t)) * w
    c3y = (0.5-a*sin(t)) * h
    c4x = (0.5+a*sin(t)) * w
    c4y = (0.5-a*cos(t)) * h
	# comment out call to r2q or to q2r or leave as it is
	Refrm(c, bg,leftx=t1x,rightx=t2x,ytop=t1y,ybot=t3y,ltopx=c1x,ltopy=c1y, rtopx=c2x,rtopy=c2y,  rbotx=c3x,rboty=c3y,lbotx=c4x,lboty=c4y, resize = "point")

	REform( bg,leftx=t1x,rightx=t2x,ytop=t1y,ybot=t3y,ltopx=c1x,ltopy=c1y, rtopx=c2x,rtopy=c2y,  rbotx=c3x,rboty=c3y,lbotx=c4x,lboty=c4y, resize = "point", qr = false )

 """)
 
 </Pre>


<BR>
<table>

<tr>
       <td><a href="../index.html">To my index page</a></td>
	   <td>down load<a href="movePlus.7z">movePlus </a>plugin</td>
       <td><a href="http://www.avisynth.nl">To Avisynth</a> </td>
</tr>
</table>	
	
</body>
</html>
