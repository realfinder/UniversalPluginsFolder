<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>F2QCorrelation function of AviSynth+ Plugin</title>
</head>

<body>
	   <font color="#cc0033"><h1>F2QCorrelation </h1></font>
	 
	  <BR><b>Author<a href="../vcmohan.html"> V. C. Mohan</a></b>
	  <BR>19 Mar 2017
	  
	  <p>F2QCorrelation function cross correlates  frames of 2 clips A and B, in frequency domain and requires 
	
	<a href="http://www.avisynth.nl/users/vcmohan/libfftw3f-3.zip"> FFTw3 32 bit dll</a>  or for 64 bit <a href="http://www.avisynth.nl/users/vcmohan/libfftw3f-3_64bit.zip"> FFTw3 64 bit dll</a>, to be in the path.</p> 
	    
	  <p>F2QCorrelation function has 2 input clips and dsplays either centered or raw cross correlation in image domain. Gamma enables display in proper perspective.
	  The correlation maximum point coordinates frame wise can be output in a txt file. This works only if center is set true, txt is true and a valid output file name with complete path is specified. Note if vdub is being used as monitor, then at end, the video file need to be closed to get the full file output.</p>
	  
	  <p>
	 <P>Only Green color of RGB formats is used, in case of other formats Y plane is used for correlation.</P>
	<p> It may be noted internally the input frame size may be increased for optimization of fft. In case  center is set true, this optimized size frame is output.</p> 	
<br> F2QCorrelation is thread safe. SetFilterMTMode("F2QCorrelation", MT_NICE_FILTER). 
In case text file output is opted probably it serializes.
<BR><BR>

<table border="2" bordercolorlight="#c0c0c0" bordercolordark="#000000">

<caption align="top">Details of parameters </caption>
<tr>
       <td><b>Description</b></td>
       <td><b>Name</b></td>
       <td><b>Type</b></td>
       <td><b>Limits</b></td>
       <td><b>Default</b></td>
</tr>
<tr>
       <td>Input referance A clip </td>
       <td></td>
       <td>clip</td>
       <td>must have the fields separated</td>
       <td>none</td>
</tr>
<tr>
       <td>Input B clip </td>
       <td></td>
       <td>clip</td>
       <td>must have identical format and dimensions of A clip</td>
       <td>none</td>
</tr>
<tr>
       <td>gamma scaling for viewing convenience</td>
       <td>gamma</td>
       <td>float</td>
       <td></td>
       <td>4.0</td>
</tr>

<tr>
       <td>Whether correlation display be centered</td>
       <td>center</td>
       <td>boolean</td>
       <td>true false</td>
       <td>true</td>
</tr>
<tr>
       <td>Whether correlation text file to be generated. Applicable only if center is set to true.</td>
       <td>txt</td>
       <td>boolean</td>
       <td> true false. </td>
       <td>false</td>
</tr>


<tr>
       <td>Full path and name of text file to be generated.</td> 
       <td>file</td>
       <td>string</td>
       <td>a valid file name must be specified if txt is set true </td>
       <td>none</td>
</tr>



</table>


<BR>#Usage examples:- 
<pre>
# for text file output
F2QCorrelation(b,a, 4.0, true, txt = true, file = "C:\Documents\corr.txt")
#for visual output only
F2QCorrelation(b,a, 1.6, true)

</pre>

 <BR> below is an illustration of output using the script .
<pre>
loadplugin("......./F2QPlus.dll")
loadplugin("......../Grid.dll")
a = addborders(last,0,0,160,148)
b = addborders(last,160,148,0,0)#.invert()
F2QCorrelation(b,a, 4.0, true)
# grid axis display to aid visual estimate
grid(grid = false,axis = true,color = $ff, bcolor = $ffff, vbcolor = $ffffff) 
<BR><img src="F2QCorr0.png" border="0">
<table>

<tr>
       <td><a href="../index.html">To my index page</a></td>
	   <td><a href="FQPlus.7z">down load plugin</a></td>
       <td><a href="http://www.avisynth.nl">To Avisynth</a> </td>
</tr>
</table>	
</body>
</html>
