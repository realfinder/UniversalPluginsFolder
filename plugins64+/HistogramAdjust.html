<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>HistogramAdjust AviSynth Plugin</title>
</head>

<body>
	   <font color="#cc0033"><h1>HistogramAdjust </h1></font>
	 
	  <BR><b>Author V. C. Mohan</b>
	  <BR>Date   3 Oct 2015
	  <BR>EMail: <a href="mailto:mohanvc@gmail.com">mohanvc</a>
	  <P> This plugin function adjusts the histogram of a frame by either
	  equalizing it or by matching with histogram of another image, or with given
	   histogram table of values. </p>
	   
	   <p>Windowed equalization . In this mode the window for 
	   deriving the input clip histogram, steps half window size each time. This windowed processing may not be suitable for all images.Possible blocky appearance. 3 window sizes for coarse, medium and fine output.  Use of small value for limit may give better results</p>
		
		<p>The function accepts RGB, YUY2 and Planar (YUY2 and YV12 only in 2.5 version) color formats. Clip
		to be processed and to be used for matching need not have identical
		color formats and dimensions. For example processing clip can be  
		YV12 , 720 X 480 pixels while matching clip is YUY2, 256 X 16 pixels.</p>
		
		<p>If matching with given table values,
		then matching clip need not be specified. The second parameter is a
		table  of integer pairs.Each pair consists of
		 Luma ( intensity)value and the second number is population (type = 4) or cummulative population (type = 5) at this value.The table is normalized by the plugin and so approximate values are OK.
		 Due to limitation of number of parameters that can be input through Avisynth,
		 not more than 25 pairs can be specified. It will be possible to input by
		 table any desired histogram shape.
		 The plugin linearly interpolates and extrapolates to construct
		  a full normalized histogram from these  values. In case of RGB input the selected color histogram is adjusted. For other formats Y value histogram is adjusted. </p> 
	  
<BR>

<table border="2" bordercolorlight="#c0c0c0" bordercolordark="#000000">

<caption align="top">Details of parameters </caption>
<tr>
       <td><b>Description</b></td>
       <td><b>Name</b></td>
       <td><b>Type</b></td>
       <td><b>Limits</b></td>
       <td><b>Default</b></td>
</tr>
<tr>
       <td>Input clip histogram of which is to be altered</td>
       <td></td>
       <td>clip</td>
       <td></td>
       <td>none</td>
</tr>

<tr>
       <td><font color="#3300ff">The following is a table of Histogram values, to be specified only if 'table' is true </font></td>
       <td></td>
       <td></td>
       <td></td>
       <td></td>
</tr>

<tr>
       <td><font color="#3300ff">Luma value </font></td>
       <td></td>
       <td>integer</td>
       <td>0 to 255 and to inrease monotonically</td>
       <td></td>
</tr>
<tr>
       <td><font color="#3300ff">population or cummulative population  at this luma value </font></td>
       <td></td>
       <td>integer</td>
       <td>non negative. In case of type = 5, should monotonically increase and Max value is 256.</td>
       <td></td>
</tr>

<tr>
       <td>Type of process</td>
       <td>type</td>
       <td>integer</td>
       <td>1 for equalization 2. for windowed equalization, 3 for matching with specified frame, 4 for matcing with given table of Luma, population. 5. for luma vs cummulative population </td>
       <td>1</td>
</tr>


<tr>
       <td>Clip in which image for matching is available</td>
       <td>mclip</td>
       <td>clip</td>
       <td>valid clip to be specified only if required</td>
       <td>dummy clip</td>
</tr>
<tr>
       <td>frame number on clip for matching</td>
       <td>mf</td>
       <td>integer</td>
       <td>within clip</td>
       <td>0</td>
</tr>

<tr>
       <td>limit on % of change in value allowed.</td>
       <td>limit</td>
       <td>integer</td>
       <td>1 to 100 </td>
       <td>100</td>
</tr>
<tr>
       <td>If windowed processing opted size of window.</td>
       <td>wsize</td>
       <td>integer</td>
       <td>1(coarse), 2 (mediu) and 3 (fine) </td>
       <td>2</td>
</tr>
<tr>
       <td>color of RGB input to process.</td>
       <td>rgb</td>
       <td>integer</td>
       <td>0: red, 1 : Green, 2: Blue </td>
       <td>1 (green)</td>
</tr>

</table>


<BR>#Usage examples:-
<Pre>
HistogramAdjust() 
HistogramAdjust(c,type=3,mclip=mm,mf=26)
HistogramAdjust(c,15,2, 30,12, 50, 33, 90, 12,150,35,200,10, type=4,limit=50)
HistogramAdjust(20,1,150,100,255,110, type=5,limit = 70) 
# RGB input. Repeated for each color
HistogramAdjust(limit = 70,rgb = 0)
HistogramAdjust(limit = 70,rgb = 1)
HistogramAdjust(limit = 50, rgb = 2)
</Pre>
<table>

<tr>
       <td><a href="../index.html">To my index page</a></td>
	   
       <td><a href="http://www.avisynth.nl">To Avisynth</a> </td>
</tr>
</table>		  			
		
</body>
</html>
