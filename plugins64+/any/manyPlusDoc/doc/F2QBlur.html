<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>F2QBlur function of AviSynth+ Plugin</title>
</head>

<body>
	   <font color="#cc0033"><h1>F2QBlur </h1></font>
	 
	  <BR><b>Author<a href="../vcmohan.html"> V. C. Mohan</a></b>
	  <BR>29 Dec 2016
	  
	  <p>F2QBlur function operates in frequency domain and requires 
	for avisynth+ 
	<a href="http://www.avisynth.nl/users/vcmohan/libfftw3f-3.zip"> FFTw3f 32 bit dll</a>  or for 64 bit avisynth+ <a href="http://www.avisynth.nl/users/vcmohan/libfftw3f-3_64bit.zip"> FFTw3 64 bit dll</a>, to be in the path.</p> 
	    
	  <p>FQBlur function blurs image in circular(as in out of focus) or linear (as due to motion) fashion or as per user specified PSF (given in a text file).</p>
	  
	  <p>In case of motion blur the line is assumed to be symmetric about origin, the 
	  end coordinates of blur line x and y specified will be extended to  -x, -y to get full line. In case of out of focus blur
	  the x coordinate is the radius of blur.</p>
	 
	 <P>All 3 colors of RGB formats are processed, in case of YUY2 only Luma (Y) is blurred. In case of YUV formats Y and for YUV444 if opted U and V will also be blurred.</P>
	<p> The text file to read for user input psf must conform strictly to following :
	<br> 1.Must have number 1 in first line.
	<br>2. Second line first integer is number of values present in each row. The second value on this line is number of rows. A maximum of  16 X 16 rows and columns can only be specified, <br>Third line onwards PSF values in rows and columns. The values are separated by space. Entries are in floating point.</p> 	
<br> F2QBlur is thread safe. SetFilterMTMode("F2QBlur", MT_NICE_FILTER).
<BR><BR>

<table border="2" bordercolorlight="#c0c0c0" bordercolordark="#000000">

<caption align="top">Details of parameters </caption>
<tr>
       <td><b>Description</b></td>
       <td><b>Name</b></td>
       <td><b>Type</b></td>
       <td><b>Limits</b></td>
       <td><b>Default</b></td>
</tr>
<tr>
       <td>Input clip </td>
       <td></td>
       <td>clip</td>
       <td>must have the fields separated</td>
       <td>none</td>
</tr>

<tr>
       <td>Whether blur is linear as in motion blur or out of focus type or PSF given in a text file</td>
       <td>psf</td>
       <td>string</td>
       <td>"line" for linear, "focus" for out of focus or "file" for user special</td>
       <td>"line"</td>
</tr>



<tr>
       <td>blur line right end x coordinate or radius of focus blur. Line assumed symmetric about origin</td>
       <td>x</td>
       <td>integer</td>
       <td>2 to 1/8 frame width</td>
       <td>6</td>
</tr>

<tr>
       <td>blur line right end y coordinate.  Line assumed symmetric about origin</td>
       <td>y</td>
       <td>integer</td>
       <td>- 1/8th to 1/8th frame height</td>
       <td>2</td>
</tr>
<tr>
       <td>value of spike to be added</td>
       <td>spike</td>
       <td>float</td>
       <td>not implemented yet</td>
       <td>2</td>
</tr>
<tr>
       <td>Full path and name of text file in which  PSF is given.</td> 
       <td>txt</td>
       <td>string</td>
       <td>a valid file name must be specified for psf = "file" option</td>
       <td>none</td>
</tr>



</table>


<BR>#Usage examples:- 
<pre>
F2qb = F2QBlur(psf = "file",  txt = "C:\avi_plugins\FQPlus\blurr.txt")


fqb1 = F2QBlur( psf = "line", x=4)
fqb2 = F2QBlur( psf = "focus", x=8)
fqb3 = F2QBlur( psf = "line", x=8,y = 2)
fqb4 = F2QBlur(psf = "line", x=12,y = -4)
fqb5 = F2QBlur(psf = "file", txt = "----")
Example text file:
1
6 6
0 0 0 0 0.15 1.0
0 0 0 0.15 1.0 0.15
0 0 0.15 1.0 0.15 0
0 0.15 1.0 0.15 0 0
0.15 1.0 0.15 0 0 0
1.0 0.15 0 0 0 0
</pre>

<BR> below are a few illustration Top left is input. 
<BR><img src="./F2QBlur0.jpeg" border="0">
<BR>

<table>

<tr>
       <td><a href="../manyPlus avisynth+ Plugin.html">To my index page</a></td>
	   <td><a href="manyPlus.7z">down load plugin</a></td>
       <td><a href="http://www.avisynth.nl">To Avisynth</a> </td>
</tr>
</table>	
</body>
</html>
