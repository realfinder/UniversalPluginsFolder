<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>NirMalam AviSynth Plugin</title>
</head>

<body>
	   <font color="#cc0033"><h1><center>NirMalam </center></h1></font>
	 
	  <BR><b>Author V. C. Mohan</b>
	  <BR>Date  6 Oct 2015
	  <BR>EMail: <a href="mailto:mohanvc@gmail.com">mohanvc</a>
	  <P>NirMalam plugin for Avisynth 2.5.8 and 2.6 versions and for avisynth+ multithread . The plugin is free for usage and the author does 
	  not give any guarentee for its operation. It may be downloaded 
	  and used at the users risk.</P>
	  
	  <P>This is an adaptive local noise reduction  filter that uses image value statistics
	   in a moving grid while trying to preserve sharpness of image.</P>
	   
	  <P> From a specified frame of the clip NirMalam either auto selects a suitable specified size
	  window or uses user specified window to obtain noise parameters. In case of RGB the green color
	  and in case of Y-U-V formats, the Y plane is used for autoselection of window</P> 
	  
	  <P> Parameter ry, gu, by control whether a color is to be left out or processed,
	  if so with what accent. A value of zero will leave out that color ( or luma or chroma).
	  A value of 100 (%)will use derived values. Any higher value may accentuate.  
	   Accentuation may soften the image so may be used cautiously.In case of 
	   Luma or RGB values of RGB Format lower accentuation values may be used. For chroma of 
	   YUY2 and Planar formats higher values may not smear colors perceptably. However,
	   experiment prior to processing a full clip.</P>
	  
	  <P>This plugin works in YUY2, Planar ( 2.5.8 version YV12), RGB32 and RGB24 color spaces. Results of using 
	  rgb format can be  different to that of Y - U - V formats. </P> 
	  
	  <P>The window  for deriving noise parameters, if autow is set to false, must be  located 
	  in  an area with least image grey level variations, so that noise statistics 
	  are correctly estimated. Note that this window coordinates must be specified
	  as  default values are not provided. If window is located in an improper
	  part , then it can lead to heavy blurring. </P>

<BR>

<table border="2" bordercolorlight="#c0c0c0" bordercolordark="#000000">

<caption align="top">Details of parameters </caption>
<tr>
       <td><b>Description</b></td>
       <td><b>Name</b></td>
       <td><b>Type</b></td>
       <td><b>Limits</b></td>
       <td><b>Default</b></td>
</tr>
<tr>
       <td>Input clip</td>
       <td></td>
       <td>clip</td>
       <td></td>
       <td>none</td>
</tr>
<tr>
       <td>frame number from which noise statistics to be determined</td>
       <td>nf</td>
       <td>integer</td>
       <td>within clip</td>
       <td>0</td>
</tr>

<tr>
       <td>Number of pixels along x axis in moving grid</td>
       <td>xgrid</td>
       <td>integer</td>
       <td>3 to 11</td>
       <td>5</td>
</tr>
<tr>
       <td>Number of pixels along y axis in moving grid</td>
       <td>ygrid</td>
       <td>integer</td>
       <td>3 to 11</td>
       <td>xgrid</td>
</tr>

<tr>
       <td>Whether window to be selected automatically</td>
       <td>autow</td>
       <td>boolean</td>
       <td>true for yes, false for use user specified window</td>
       <td>true</td>
</tr>

<tr>
       <td> minimum window size if autow is true </td>
       <td>minw</td>
       <td>integer</td>
       <td>Between 1/256 and 1/16 of frame size</td>
       <td>1/128 of frame size</td>
</tr>

<tr>
       <td>accent %age for red or Y  </td>
       <td>ry</td>
       <td>integer</td>
       <td>Between 0 to 100</td>
       <td>75</td>
</tr>

<tr>
       <td>accent %age for green or U  </td>
       <td>gu</td>
       <td>integer</td>
       <td>Between 0 to 100</td>
       <td>75</td>
</tr>
<tr>
       <td>accent %age for blue or V  </td>
       <td>bv</td>
       <td>integer</td>
       <td>Between 0 to 100</td>
       <td>75</td>
</tr>


<tr>
       <td>window left x at start frame for computing global variance</td>
       <td>lx</td>
       <td>integer</td>
       <td>within clip, less than rx</td>
       <td>none. Must be specified  for autow being false</td>
</tr>
<tr>
       <td>window top y at start frame for computing global variance</td>
       <td>ty</td>
       <td>integer</td>
       <td>within clip, less than by</td>
       <td>none. Must be specified  for autow being false</td>
</tr>
<tr>
       <td>window right x at start frame for computing global variance</td>
       <td>rx</td>
       <td>integer</td>
       <td>within clip, more than lx</td>
       <td>none. Must be specified  for autow being false</td>
</tr>
<tr>
       <td>window bottom y at start frame for computing global variance</td>
       <td>by</td>
       <td>integer</td>
       <td>within clip, more than ty</td>
       <td>none. Must be specified  for autow being false</td>
</tr>


</table>

<BR>
Usage examples
<BR>NirMalam()
<BR>NirMalam(ry = 0, gu = 0, bv = 150, autow = false, xgrid = 7, lx = 100, rx = 220, ty = 340, by = 400)


<BR>following script used to get the images below:


<BR>On left is YUY2 input, middle is output using  script and on right is differance
<BR> NirMalam(imgl, xgrid = 5, ygrid = 9 )
<BR>#subtract(imgl,dn2 ).Levels(125,1,135,0,255)
<BR><img src="NirMalam0.jpg" width="900" height="576" alt="" border="0">
<BR>
<BR>
<table>

<tr>
       <td><a href="../index.html">To my index page</a></td>
	   <td>................................</td>
       <td><a href="http://www.avisynth.nl">To Avisynth</a> </td>
</tr>
</table>	
  			
		
</body>
</html>
